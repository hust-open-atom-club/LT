---
status: translated
title: "LDM - Logical Disk Manager (Dynamic Disks)"
author: Linux Kernel Community
collector: tttturtle-russ
collected_date: 20240718
translator: FILL_YOUR_GITHUB_ID_HERE
translating_date: 20250918
link: https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/admin-guide/ldm.rst
---

# LDM - 逻辑磁盘管理器（动态磁盘）

作者

:   最初由 FlatCap - Richard Russon 撰写
    \<<ldm@flatcap.org>\>。

最后更新

:   Anton Altaparmakov 于 2007 年 3 月 30 日针对 Windows Vista 更新。

## 概述

Windows 2000、XP 和 Vista 使用一种新的分区方案。它是对 MSDOS 风格分区的完全替代。它将信息存储在物理磁盘末尾的一个大小为 1MiB 的日志式数据库中。分区的大小仅受磁盘空间限制，最大分区数量接近 2000 个。

在 LDM 下创建的任何分区都称为“动态磁盘”。不再存在主分区或扩展分区。传统的 MSDOS 风格分区现在被称为基本磁盘。

如果您希望使用跨区卷、带区卷、镜像卷或 RAID 5 卷，则必须使用动态磁盘。日志功能允许 Windows 在无需重启的情况下修改这些分区和文件系统。

一旦 LDM 驱动程序对磁盘进行了划分，您就可以使用 MD 驱动程序来组装任何多分区卷，例如带区卷、RAID5。

为了防止旧版应用程序重新分区磁盘，LDM 会创建一个虚拟的 MSDOS 分区，其中包含一个与磁盘大小相同的分区。Linux 的 LDM 驱动程序支持的就是这种结构。

Vista 实现了一种较新的方法，即将 LDM 建立在 GPT 标签磁盘之上。目前 Linux 的 LDM 驱动程序尚不支持此方式。

## 示例

以下是被划分为七个分区的50MiB磁盘。 :::: note
::: title
注意
:::

磁盘末尾缺失的1MiB空间用于存储LDM数据库。

::::

+---------++--------------+---------+-----++--------------+---------+----+
| 偏移字节 | 扇区        | MiB    || 大小字节      | 扇区        | MiB |
+=========++==============+=========+=====++==============+=========+====+
| 0       | 0           | 0      || 52428800      | 102400     | 50  |
+---------++--------------+---------+-----++--------------+---------+----+
| 51380224| 100352      | 49     || 1048576       | 2048       | 1   |
+---------++--------------+---------+-----++--------------+---------+----+
| 16384   | 32          | 0      || 6979584       | 13632      | 6   |
+---------++--------------+---------+-----++--------------+---------+----+
| 6995968 | 13664       | 6      || 10485760      | 20480      | 10  |
+---------++--------------+---------+-----++--------------+---------+----+
| 17481728| 34144       | 16     || 4194304       | 8192       | 4   |
+---------++--------------+---------+-----++--------------+---------+----+
| 21676032| 42336       | 20     || 5242880       | 10240      | 5   |
+---------++--------------+---------+-----++--------------+---------+----+
| 26918912| 52576       | 25     || 10485760      | 20480      | 10  |
+---------++--------------+---------+-----++--------------+---------+----+
| 37404672| 73056       | 35     || 13959168      | 27264      | 13  |
+---------++--------------+---------+-----++--------------+---------+----+

LDM 数据库可能不会按照分区在磁盘上的实际顺序存储它们，但驱动程序会对其进行排序。

当 Linux 启动时，你会看到类似以下内容：

    hda: 102400 扇区，配备 32KiB 缓存，CHS=50/64/32
    hda: [LDM] hda1 hda2 hda3 hda4 hda5 hda6 hda7

## 编译 LDM 支持

要启用 LDM，请选择以下两个选项：

> -   "高级分区选择" CONFIG_PARTITION_ADVANCED  
> -   "Windows 逻辑磁盘管理器 (动态磁盘) 支持"  
>     CONFIG_LDM_PARTITION

如果你认为驱动程序未按预期工作，可以启用额外的调试代码。这将产生大量输出。该选项为：

> -   "Windows LDM 额外日志记录" CONFIG_LDM_DEBUG

注意：分区代码不能编译为模块。

与所有分区代码一样，如果驱动程序未检测到其类型的分区标志，它会将控制权交给其他驱动程序，因此启用该功能没有任何风险。

如果你使用的是动态磁盘但未启用该驱动程序，那么你只能看到一个填满整个磁盘的虚拟 MSDOS 分区，且无法挂载磁盘上的任何卷。

## 启动

如果你启用了 LDM 支持，lilo 能够从发现的任意分区启动。然而，grub 无法识别 LDM 分区结构，因此不能从动态磁盘启动。

## 更多文档

有关 LDM 的概述以及完整的技术文档可供下载。

> <http://www.linux-ntfs.org/>

如果你有关于 LDM 的问题在文档中未找到答案，请发送邮件给我。

此致，

:   FlatCap - Richard Russon <ldm@flatcap.org>